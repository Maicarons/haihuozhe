# 还活着项目重构与配置计划

## 1. 项目概述

* 项目名称：还活着

* 功能：按照周期打卡，若超时则向用户规定的目标发送消息

* 技术栈：前端Uniapp，后端FastAPI（运行方式在run.cmd)

* 目标：重构后端代码，确保前后端功能匹配，配置monorepo结构并上传到GitHub

## 2. 后端重构计划

### 2.1 代码结构优化

* 将现有代码按功能模块进行更清晰的划分

* 优化API路由结构，使用FastAPI的APIRouter进行路由分组

* 改进数据库操作，使用SQLAlchemy ORM替代直接SQL操作

* 增强错误处理和日志记录

### 2.2 功能增强

* 完善推送服务，支持更多推送方式

* 优化定时任务逻辑，提高性能

* 增强数据验证和安全性

* 支持环境变量配置

### 2.3 部署优化

* 更新vercel.json配置，确保能在Vercel上正确运行

* 优化依赖管理

* 增加Docker支持（可选）

## 3. 前端检查与调整

### 3.1 功能匹配检查

* 验证前端API调用与后端路由是否匹配

* 检查数据模型是否一致

* 确保推送规则配置与后端支持的推送方式匹配

### 3.2 配置优化

* 优化前端配置文件，支持不同环境的后端地址

* 确保前端能够正确处理后端返回的数据格式

## 4. Monorepo配置

### 4.1 根目录配置

* 创建根目录README.md文件

* 创建根目录.gitignore文件

* 创建LICENSE文件（AGPL）

* 配置monorepo结构，使用适当的目录组织

### 4.2 子项目配置

* 确保每个子项目（frontend和backend）都有自己的README.md和.gitignore文件

* 每个子项目使用AGPL许可证

## 5. GitHub上传

### 5.1 仓库创建

* 已在GitHub创建三个仓库：

  * <https://github.com/Maicarons/haihuozhe-backend>

  * <https://github.com/Maicarons/haihuozhe-frontend>

  * <https://github.com/Maicarons/haihuozhe（主仓库，用于monorepo）>

### 5.2 上传步骤

* 初始化git仓库

* 配置.gitignore文件

* 提交代码到主仓库（haihuozhe）

* 配置子仓库关联（如果需要）

## 6. 执行步骤

1. **创建根目录README.md**：编写项目概述、功能介绍、技术栈、安装和使用说明
2. **重构后端代码**：

   * 优化代码结构

   * 改进API设计

   * 增强功能

   * 更新vercel.json配置
3. **检查前端与后端匹配**：

   * 验证API调用

   * 检查数据模型
4. **配置monorepo结构**：

   * 创建根目录配置文件

   * 确保子项目配置正确
5. **上传到GitHub**：

   * 初始化git

   * 提交代码

   * 配置仓库

## 7. 预期结果

* 后端代码结构清晰，功能完整，性能优化

* 前后端功能匹配，能够正常通信

* 项目配置为monorepo结构，便于管理

* 代码成功上传到GitHub，三个仓库配置正确

## 8. 注意事项

* 确保所有文件使用正确的许可证（AGPL）

* 注意.gitignore文件的配置，避免提交不必要的文件

* 确保后端能够在Vercel上正确运行

* 保持代码风格一致，添加必要的注释

* 确保前后端数据模型一致

现在我将开始执行这个计划，首先创建根目录README.md文件，然后进行后端重构，最后配置monorepo并上传到GitHub。
